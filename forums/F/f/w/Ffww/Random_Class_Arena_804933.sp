/* Plugin Template generated by Pawn Studio */

#include <sourcemod>
#include <tf2_stocks>
#include <sdktools>
public Plugin:myinfo = 
{
	name = "Random Class Arena",
	author = "Ffww",
	description = "<- Description ->",
	version = "1.0",
	url = "<- URL ->"
}

new Handle:IsOn;

public OnPluginStart()
{
	IsOn = CreateConVar("sm_randomclass_enabled","0","Enable/Disable random classes");
	HookEvent("player_spawn", PlayerSpawn);
}
public Action:PlayerSpawn(Handle:event, const String:name[], bool:dontBroadcast)
{
	if (!GetConVarBool(IsOn))
		return;
	new client = GetClientOfUserId(GetEventInt(event, "userid"))
	CreateTimer(8.99, timer_changeclass, client);
}
public Action:timer_changeclass(Handle:timer, any:client)
{
	new TFClassType:class = TFClassType:GetRandomInt(1,9);
	TF2_SetPlayerClass(client, class, true, true);
	ShowVGUIPanel(client, GetClientTeam(client) == 3 ? "class_blue" : "class_red");
}