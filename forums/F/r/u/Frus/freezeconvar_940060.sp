/* Plugin Template generated by Pawn Studio */

#include <sourcemod>

public Plugin:myinfo = 
{
	name = "Simple CVAR Resetter",
	author = "Frustian",
	description = "Resets convars when they get changed",
	version = "0.0.1",
	url = "<- URL ->"
}
public OnPluginStart()
{
	RegServerCmd("sm_freezecvar", Command_Freeze);
	RegServerCmd("sm_thawcvar", Command_Thaw);
}
public Action:Command_Freeze(args)
{
	decl String:cvar[128];
	GetCmdArg(1, cvar, sizeof(cvar));
	HookConVarChange(FindConVar(cvar), OnFrozenChange);
	return Plugin_Handled;
}
public Action:Command_Thaw(args)
{
	decl String:cvar[128];
	GetCmdArg(1, cvar, sizeof(cvar));
	UnhookConVarChange(FindConVar(cvar), OnFrozenChange);
	return Plugin_Handled;
}
public OnFrozenChange(Handle:cvar, const String:oldVal[], const String:newVal[])
{
	SetConVarInt(cvar, StringToInt(oldVal));
}
