#pragma semicolon 1

#include <sourcemod>
#include <tf2_stocks>

public Plugin:myinfo = 
{
	name = "Engi exploit fix",
	author = "Flyflo",
	description = "Prevent engies from building multiple sentries and dispensers + spies building dispensers",
	version = "1.1",
	url = "http://www.geek-gaming.fr"
}

public OnPluginStart()
{
	RegConsoleCmd("build", Cmd_Build);
}

public Action:Cmd_Build(iClient, iArgs)
{
	decl String:Buffer[128];
	GetCmdArgString(Buffer, sizeof(Buffer));

	if(TF2_GetPlayerClass(iClient) == TFClass_Engineer)
	{
		if(strcmp(Buffer, "0 0", false) == 0 || strcmp(Buffer, "1 0", false) == 0 || strcmp(Buffer, "1 1", false) == 0 || strcmp(Buffer, "2 0", false) == 0)
		{
			return Plugin_Continue;
		}
	}
	
	return Plugin_Handled;
}  