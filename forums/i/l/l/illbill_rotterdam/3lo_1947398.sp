/* Script generated by SourcePawn IDE */

#include <sourcemod>

#define PLUGIN_VERSION "1.0.0.0"

public Plugin:myinfo =
{
    name = "3lo",
    author = "",
    description = "none",
    version = PLUGIN_VERSION,
    url = "Site"
}

public OnPluginStart()
{
	RegAdminCmd("sm_3lo" ,command_3lo ,ADMFLAG_GENERIC)
}

public Action:command_3lo(client, args)
{
		
	CreateTimer(3.0, Timer_RoundRestart1);
	CreateTimer(1.0, Timer_RoundRestart2);
	CreateTimer(4.0, Timer_RoundRestart3);
	CreateTimer(4.5, Timer_RoundAlive);
}

public Action:record(Handle:timer)
{
		
	InsertServerCommand("tv_record demos/%d%m%-%s%s", time,".dem");

}


public Action:get_ready(Handle:timer, any:client)
{
	
	sm_csay( "-- GET READY --" );
	return Plugin_Stop;
}

public Action:Timer_RoundRestart1(Handle:timer, any:client)
{
	
	PrintToChatAll( "-- LIVE IN 3 RESTARTS --" );
	ServerCommand("mp_restartgame 1");	
	return Plugin_Stop;
}

public Action:Timer_RoundRestart2(Handle:timer, any:client)
{
	PrintToChatAll( "-- LIVE IN 2 RESTARTS --" );
	ServerCommand("mp_restartgame 1");	
	return Plugin_Stop;
}

public Action:Timer_RoundRestart3(Handle:timer, any:client)
{
	PrintToChatAll( "-- LIVE AFTER RESTART --" );
	ServerCommand("mp_restartgame 1");	
	return Plugin_Stop;
}

public Action:match_live(Handle:timer, any:client)
{
	
	sm_csay( "-- MATCH IS LIVE --" );
	return Plugin_Stop;
}

public Action:Timer_RoundAlive(Handle:timer, any:client)
{
	PrintToChatAll( "-- MATCH IS LIVE --" );
	PrintToChatAll( "-- MATCH IS LIVE --" );
	PrintToChatAll( "-- MATCH IS LIVE --" );
	PrintToChatAll( "-- MATCH IS LIVE --" );
	PrintToChatAll( "-- GL & HF -" );
	
	return Plugin_Stop;
}

public Action:matchend(Handle:timer, any:client)
{
	
	PrintToChatAll( "WINNING TEAM" won the match); 
	PrintToChatAll( "Good Game" );
	when cs_win_panel_match; tv_stoprecord
	
	or when draw; 
	PrintToChatAll( "Draw" );
	PrintToChatAll( "Play overtime?" );
	
	Vote menu: Yes, no
	more than 60%
	exec overtime.cfg
	play public Action1
	
	less than 60%
	PrintToChatAll( "Voted ended in no overtime); 
	PrintToChatAll( "Game ended in a draw" );
	PrintToChatAll( "Good Game" );
	when cs_win_panel_match; tv_stoprecord

}

public Action1:get_ready(Handle:timer, any:client)
{
	
	sm_csay( "-- OVERTIME --" );
	return Plugin_Stop;
}

public Action1:Timer_RoundRestart1(Handle:timer, any:client)
{
	
	PrintToChatAll( "-- OVERTIME IN 3 RESTARTS --" );
	ServerCommand("mp_restartgame 1");	
	return Plugin_Stop;
}

public Action1:Timer_RoundRestart2(Handle:timer, any:client)
{
	PrintToChatAll( "-- OVERTIME IN 2 RESTARTS --" );
	ServerCommand("mp_restartgame 1");	
	return Plugin_Stop;
}

public Action1:Timer_RoundRestart3(Handle:timer, any:client)
{
	PrintToChatAll( "-- OVERTIME AFTER RESTART --" );
	ServerCommand("mp_restartgame 1");	
	return Plugin_Stop;
}

public Action1:match_live(Handle:timer, any:client)
{
	
	sm_csay( "-- OVERTIME IS LIVE --" );
	return Plugin_Stop;
}

public Action1:Timer_RoundAlive(Handle:timer, any:client)
{
	PrintToChatAll( "-- OVERTIME IS LIVE --" );
	PrintToChatAll( "-- OVERTIME IS LIVE --" );
	PrintToChatAll( "-- OVERTIME IS LIVE --" );
	PrintToChatAll( "-- GL & HF --" );
	
	return Plugin_Stop;
}

public Action1:matchend(Handle:timer, any:client)
{
	
	PrintToChatAll( "WINNING TEAM" won the match in overtime); 
	PrintToChatAll( "Good Game" );
	when cs_win_panel_match; tv_stoprecord
	
}