#pragma semicolon 1

#include <sourcemod>
#include <tf2_stocks>

#define PLUGIN_VERSION			"1.0.0.0"

public Plugin:myinfo =
{
	name = "Spy Exploit Fix",
	author = "Wazz",
	description = "Fixes spy exploit",
	version = PLUGIN_VERSION,
	url = "http://www.sourcemod.net/"
};

public OnPluginStart()
{
	CreateConVar("sm_spyexploitfix_version", PLUGIN_VERSION, "Spy Exploit Fix version", FCVAR_PLUGIN|FCVAR_SPONLY|FCVAR_REPLICATED|FCVAR_NOTIFY|FCVAR_DONTRECORD);
}

public Action:OnClientCommand(Client, args)
{
	new String:command[64];
	GetCmdArg(0, command, sizeof(command));
	
	if (TF2_GetPlayerClass(Client) == TFClass_Spy)
	{
		if (StrContains(command, "build", false) > -1)
		{
			return Plugin_Handled;
		}
	}
	
	return Plugin_Continue;
}